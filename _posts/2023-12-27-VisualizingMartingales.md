---
layout: post
usemathjax: true
categories: ['embracing transitory confusion', math]
title: "Visualizing stochastic processes and martingales"
permalink: /:year/:title:output_ext

---

Visualizing fields generated by a stochastic process
----

The fractal triangles shown below can help us visualize a simple stochastic process $${x_1, x_2, x_3}$$ (corresponding to times $$t_1, t_2, t_3$$).

![fractal triangle](/assets/images/fractaltri.png){: width="300" .center-image }

Before time $$t_1$$, the value taken by $$x_1$$ is not yet determined; at $$t_1$$ and later, the value taken by $$x_1$$ is determined, and we say that we have measured $$x_1$$. And similarly for $$x_2$$ and $$x_3$$.

We can think of each random variable $$x_i$$ as a 3-sided dice (in the case of $$x_1$$) or a 4-sided dice (in the case of $$x_2$$ and $$x_3$$). So for example, let's say we roll dice 1 and get the right-face, and then we roll dice 2 and get the up-face. And now we are poised to roll dice 3 (but have not yet done it), and we know that the dice 3 roll could have 4 possible results. The image of $$x_3$$ contains 4 possible values, corresponding to the four colors (red, green, blue, purple); the probabilities for measuring each value is given by the measure of its corresponding colored segment. This situation is illustrated in the figure.

Let $$\Omega$$ be the set of all possible scenarios for rolling the three dice. Then we can think of $$\Omega$$ as all the points in the border of the figure (i.e., all the points that are on the external border of the multi-fractal-triangle object). Let $$W$$ = the event that consists of all four colored segments. $$W$$ is a subset of $$\Omega$$; we call it the event {"Dice 1 rolled right-face" and "dice 2 rolled up-face"}. It is 1 of 12 events of this type because there are 12 ways that dice 1 and dice 2 could have turned out.

These 12 events form a partition $$P$$ of $$\Omega$$ that generates the field $$F_2$$, which is also called the field generated by $$x_1$$ and $$x_2$$. This means that $$x_1$$ maps all outcomes in any given event in $$F_2$$ to the same value, and $$x_2$$ maps all outcomes in any given event in $$F_2$$ to the same value.

Visualizing a conditional expectation
------
The conditional expectation $$E[x3 \vert x1,x2]$$ is the expected value of $$x_3$$ given the measurement results for $$x_1$$ and $$x_2$$. 

So in this example, where we know that the event $$W$$ (the four colored segments) is true, $$E[x_3 \vert x_1,x_2]$$ is a random variable that maps any outcome in $$W$$ to a single value, namely the average of $$x_3$$ over the event $$W$$.

$$x_2$$ by itself is a random variable that maps an outcome that is anywhere on the outline of the figure ($$\Omega$$) to one of the values in the image of $$x_2$$, with the probability of each possible value given by the total measure of the corresponding segments that map to that value.

Visualizing a martingale
------
So here is how we think about a [martingale](https://en.wikipedia.org/wiki/Martingale_(probability_theory)#Definitions){:target="_blank"}-like behavior where 

$$
E[x_3 \vert x_1,x_2]=x_2.
$$

For any outcome $$\omega \in \Omega$$, let event $$A$$ = the element of the partition $$P$$ that contains $$\omega$$ (see above - $$P$$ is the partition that generates the field $$F_2$$, and $$F_2$$ is the field generated by $$x_1$$ and $$x_2$$). Then $$x_2$$ takes on a single fixed value $$x_2(A)$$ over the entire event $$A$$; this is the right hand side of the martingale condition. And we require the left hand side of the martingale condition, the average of $$x_3$$ over the event $$A$$, to be equal to $$x_2(A)$$.

![fractal triangle](/assets/images/fractaltri.png){: width="300" .center-image }

Looking back at the fractal triangles, taking the event $$W$$ (the four colored segments) as an example, $$x_2$$ takes on a single value $$x_2(W)$$ over the entire event $$W$$, so we require the average of $$x_3$$ over the four colored segments to be equal to that value $$x_2(W)$$.

This is the meaning of the martingale condition.



---

[Share or comment on Mastodon](https://hachyderm.io/@Sunfishstanford/111657178074202999){:target="_blank"}

